<div class="lotterylabels">
  <% @days = number_of_days_to_play(params[:recorded]) %>
  <% @dayplay = Date.today %>
  <% if params[:play_until_win] %>
      You have chosen to play the lottery daily until you win!
      The winning number and date will be highlighted.
     <% else %>
      You have chosen to play the lottery daily until <%= (params[:pickdate]) %>.
      This will be played for <%= @days %> days.
      <% end %>
  <br/>
  Any winning number will be highlighted with the date won!
</div>
<br/>
<table class="table table-condensed table-bordered">
  <tr>
    <th>Week #</th>
    <% (1..7).each do |tr|%>
    <th>Day <%= tr %></th>
    <% end %>
  </tr>
  <% @weeks = weeks_to_play(number_of_days_to_play(params[:recorded])) %>
  <% if params[:play_until_win] %>
      <%= 1 %>
  <% else %>
    <% 1.upto(@weeks) do |i| %>
        <tr>
        <td class="table-data-rownum"><%= i %></td>
        <% 1.upto(seven_or_remainder(@weeks,@days,i)) do %>
            <% @picked = generate_pick_combo(params[:pick].to_i) %>
            <% if @picked == params[:lucky_num] %>
                <td class="table-data-winner">Winning number on:<%= ((@dayplay).strftime("%m/%d/%Y")) %>  after <%=  (@dayplay - (Date.today)).to_i %> days.</td>
            <% else %>
                <td class="table-data-picked"><%= @picked %></td>
                <% @dayplay += 1 %>
            <% end %>
        <% end %>
        </tr>
    <% end %>
  <% end %>
</table>

